// Import library functions for theme creation.
@import '~@angular/material/theming';
@import '~@pxblue/colors/palette';
@import 'utility';
@import './mixins/input-field';
@import './mixins/chip';

@mixin bluetheme($theme) {
    $primary: map-get($theme, primary);
    $accent: map-get($theme, accent);
    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    /* input fields */
    $inputPrimary: (
        icon: map-get($foreground, hint),
        labelEmpty: map-get($foreground, hint),
        labelFilled: map-get($foreground, text),
        labelFocused: map-get($pxb-blue, 500),
        underlineColor: map-get($foreground, divider),
        underlineHoverColor: map-get($foreground, text),
        underlineFocusColor: map-get($pxb-blue, 500),
        placeholder: map-get($pxb-black, 100),
        hint: map-get($foreground, secondary-text),
        filledBackgroundColor: map-get($pxb-white, 200),
    );
    $inputWarn: (
        icon: map-get($foreground, hint),
        labelEmpty: map-get($pxb-red, 500),
        labelFilled: map-get($pxb-red, 500),
        labelFocused: map-get($pxb-red, 500),
        underlineColor: map-get($pxb-red, 500),
        underlineHoverColor: map-get($pxb-red, 900),
        underlineFocusColor: map-get($pxb-red, 500),
        placeholder: map-get($pxb-black, 100),
        hint: map-get($pxb-red, 500),
        filledBackgroundColor: map-get($pxb-white, 200),
    );
    $inputDisabled: (
        text: map-get($foreground, disabled),
        filledBackgroundColor: map-get($pxb-white, 100),
    );
    @include pxb-mat-form-field($inputPrimary, $inputWarn, $inputDisabled);

    /* Chips */
    $chipText: map-get($pxb-white, 50);
    $chipPrimary: (
        text: $chipText,
        backgroundPalette: $pxb-blue,
    );
    $chipAccent: (
        text: $chipText,
        backgroundPalette: $pxb-lightBlue,
    );
    $chipWarn: (
        text: $chipText,
        backgroundPalette: $pxb-red,
    );
    $chipDefault: (
        text: map-get($foreground, text),
        backgroundPalette: $pxb-white,
        remove: map-get($pxb-gray, 500),
        removeHover: map-get($pxb-gray, 400),
    );
    @include pxb-mat-chip($chipPrimary, $chipAccent, $chipWarn, $chipDefault);

    /* toolbar*/
    .mat-toolbar {
        color: map-get($pxb-white, 50);
        background-color: map-get($primary, 500);
        &.mat-primary {
            background-color: map-get($primary, 500);
        }
        &.mat-accent {
            background-color: map-get($primary, 700);
        }
    }

    /*tab bar*/
    .mat-tab-group {
        .mat-tab-header {
            background-color: map-get($background, app-bar);
        }

        &.mat-primary .mat-tab-header {
            background-color: map-get($primary, 500);

            .mat-tab-label,
            .mat-tab-link {
                color: map-get($pxb-white, 50);
            }
        }

        &.mat-accent .mat-tab-header {
            background-color: map-get($primary, 700);

            .mat-tab-label,
            .mat-tab-link {
                color: map-get($pxb-white, 50);
            }
        }
    }

    /* tabbar link*/
    .mat-tab-group.mat-primary .mat-ink-bar,
    .mat-tab-nav-bar.mat-primary .mat-ink-bar {
        background-color: map-get($background, base);
    }

    .mat-tab-group.mat-accent .mat-ink-bar,
    .mat-tab-nav-bar.mat-accent .mat-ink-bar {
        background-color: map-get($background, base);
    }

    .mat-tab-group .mat-ink-bar {
        background-color: map-get($primary, 500);
    }

    /* tab bar arrows*/
    .mat-primary,
    .mat-accent {
        .mat-tab-header-pagination-chevron {
            border-color: map-get($background, base);
        }
    }

    /* button*/
    .mat-stroked-button:not([disabled]) {
        border-color: map-get($background, base);

        &.mat-primary {
            border-color: map-get($primary, 500);
        }

        &.mat-accent {
            border-color: map-get($accent, 500);
        }
    }

    /* steppers */
    .mat-step-header .mat-step-icon-state-done,
    .mat-step-icon.mat-step-icon-state-number,
    .mat-step-icon.mat-step-icon-state-add {
        background-color: map-get($pxb-gray, 300);
    }
    .mat-step-header[aria-selected='true'] .mat-step-icon {
        background-color: map-get($primary, 500);
    }
    .mat-step-header {
        &:hover,
        &.cdk-program-focused,
        &.cdk-mouse-focused,
        &.cdk-focused {
            background-color: unset;
        }

        .mat-focus-indicator.mat-button-base.ng-star-inserted {
            background-color: unset;
        }
    }

    /* PXB Drawer */
    .pxb-drawer {
        background-color: map-get($pxb-white, 50);
        .pxb-drawer-nested-nav-item mat-expansion-panel {
            background-color: map-get($pxb-white, 200);
        }
        .pxb-drawer-nav-item-active-highlight {
            opacity: 0.05;
        }
    }
}
